"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createOrg = void 0;
const auth_1 = require("../auth");
const setup_1 = require("../setup");
/**
 * Function uses internal SDK to return registration url with the `is_create_org`
 * query param set to true.
 *
 * @param {Request} req
 * @param {Response} res
 * @param {NextFunction} next
 * @returns {Promise<void>}
 */
const createOrg = async (req, res, next) => {
    const error = (0, auth_1.validateQueryParams)(req.query);
    if (error !== null) {
        res.status(400);
        return next(error);
    }
    const { createOrg } = (0, setup_1.getInternalClient)();
    const createOrgURL = await createOrg(req, req.query);
    res.redirect(createOrgURL.toString());
};
exports.createOrg = createOrg;
